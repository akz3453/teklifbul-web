<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Konsol Test - Teklifbul</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' fill='%233b82f6' rx='6'/%3E%3Ctext x='16' y='22' font-family='Arial' font-size='18' font-weight='bold' text-anchor='middle' fill='white'%3ET%3C/text%3E%3C/svg%3E">
    <style>
        body { font-family: system-ui, Arial; margin: 20px; background: #f9fafb; }
        .test-container { max-width: 600px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 4px; background: #f3f4f6; }
        .success { background: #d1fae5; color: #065f46; }
        .error { background: #fee2e2; color: #991b1b; }
        button { padding: 10px 20px; margin: 5px; border: none; border-radius: 4px; cursor: pointer; background: #3b82f6; color: white; }
        pre { background: #f9fafb; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ Konsol Test</h1>
        <p>Bu sayfa modÃ¼llerin yÃ¼klenip yÃ¼klenmediÄŸini test eder.</p>
        
        <button onclick="testModules()">ModÃ¼lleri Test Et</button>
        <button onclick="testFirebase()">Firebase Test Et</button>
        <button onclick="clearResults()">SonuÃ§larÄ± Temizle</button>
        
        <div id="results"></div>
    </div>

    <script type="module">
        // Test modÃ¼llerini import et
        let modules = {};
        let errors = [];

        try {
            console.log('ğŸ”§ ModÃ¼ller yÃ¼kleniyor...');
            
            // Firebase
            const firebase = await import('./firebase.js');
            modules.firebase = firebase;
            console.log('âœ… Firebase yÃ¼klendi');

            // Error handling
            const errorsModule = await import('./assets/js/ui/errors.js');
            modules.errors = errorsModule;
            console.log('âœ… Error handling yÃ¼klendi');

            // Demands service
            const demandsModule = await import('./assets/js/services/demands-new.js');
            modules.demands = demandsModule;
            console.log('âœ… Demands service yÃ¼klendi');

            // Suppliers service
            const suppliersModule = await import('./assets/js/services/suppliers.js');
            modules.suppliers = suppliersModule;
            console.log('âœ… Suppliers service yÃ¼klendi');

            // Tabs UI
            const tabsModule = await import('./assets/js/ui/tabs.js');
            modules.tabs = tabsModule;
            console.log('âœ… Tabs UI yÃ¼klendi');

            // Company selector
            const companyModule = await import('./assets/js/ui/company-selector.js');
            modules.company = companyModule;
            console.log('âœ… Company selector yÃ¼klendi');

        } catch (error) {
            console.error('âŒ ModÃ¼l yÃ¼kleme hatasÄ±:', error);
            errors.push(`ModÃ¼l yÃ¼kleme hatasÄ±: ${error.message}`);
        }

        window.testModules = function() {
            const resultsDiv = document.getElementById('results');
            let html = '<h3>ModÃ¼l Test SonuÃ§larÄ±:</h3>';
            
            const moduleNames = ['firebase', 'errors', 'demands', 'suppliers', 'tabs', 'company'];
            let successCount = 0;
            
            moduleNames.forEach(name => {
                if (modules[name]) {
                    html += `<div class="test-result success">âœ… ${name}: YÃ¼klendi</div>`;
                    successCount++;
                } else {
                    html += `<div class="test-result error">âŒ ${name}: YÃ¼klenemedi</div>`;
                }
            });
            
            html += `<div class="test-result ${successCount === moduleNames.length ? 'success' : 'error'}">
                <strong>Toplam: ${successCount}/${moduleNames.length} modÃ¼l yÃ¼klendi</strong>
            </div>`;
            
            if (errors.length > 0) {
                html += '<h4>Hatalar:</h4>';
                errors.forEach(error => {
                    html += `<div class="test-result error">${error}</div>`;
                });
            }
            
            resultsDiv.innerHTML = html;
        };

        window.testFirebase = async function() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<div class="test-result">Firebase test ediliyor...</div>';
            
            try {
                const { db, auth } = modules.firebase;
                
                // Test Firestore connection
                const { collection, doc, getDoc } = await import('https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js');
                const testRef = doc(collection(db, 'test'), 'connection');
                const testDoc = await getDoc(testRef);
                
                resultsDiv.innerHTML = `
                    <div class="test-result success">âœ… Firebase baÄŸlantÄ±sÄ± baÅŸarÄ±lÄ±!</div>
                    <pre>Database: ${db.app.name}
Auth: ${auth.currentUser ? 'KullanÄ±cÄ± giriÅŸ yapmÄ±ÅŸ' : 'KullanÄ±cÄ± giriÅŸ yapmamÄ±ÅŸ'}
Test dokÃ¼manÄ±: ${testDoc.exists() ? 'Mevcut' : 'Mevcut deÄŸil'}</pre>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="test-result error">âŒ Firebase test hatasÄ±:</div>
                    <pre>${error.message}</pre>
                `;
            }
        };

        window.clearResults = function() {
            document.getElementById('results').innerHTML = '';
        };

        // Sayfa yÃ¼klendiÄŸinde otomatik test
        window.addEventListener('load', () => {
            setTimeout(() => {
                testModules();
                testFirebase();
            }, 1000);
        });
    </script>
</body>
</html>
