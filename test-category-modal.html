<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kategori Modal Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            padding: 10px 20px;
            background: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
        }
        .btn:hover {
            background: #2563eb;
        }
        .btn-success {
            background: #10b981;
        }
        .btn-success:hover {
            background: #059669;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ·ï¸ Kategori Modal Test SayfasÄ±</h1>
        <p>Bu sayfa kategori gruplarÄ± modal'Ä±nÄ±n Ã§alÄ±ÅŸÄ±p Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± test etmek iÃ§in oluÅŸturulmuÅŸtur.</p>
        
        <div style="margin: 20px 0;">
            <button id="testCreateModal" class="btn btn-success">â• Yeni Grup OluÅŸtur</button>
            <button id="testEditModal" class="btn">âœï¸ Grup DÃ¼zenle (Test)</button>
            <button id="testDirectCategories" class="btn">ğŸ” Kategorileri DoÄŸrudan Test Et</button>
        </div>
        
        <div id="testResults" style="margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 6px; display: none;">
            <h3>Test SonuÃ§larÄ±:</h3>
            <div id="testOutput"></div>
        </div>
    </div>

    <script type="module">
        // Test iÃ§in mock fonksiyonlar
        const mockOnCreate = async (groupData) => {
            console.log('âœ… Mock onCreate called:', groupData);
            document.getElementById('testOutput').innerHTML += `
                <p><strong>âœ… Grup OluÅŸturuldu:</strong> ${groupData.name}</p>
                <p><strong>Kategoriler:</strong> ${groupData.categories.join(', ')}</p>
            `;
            document.getElementById('testResults').style.display = 'block';
        };

        const mockOnUpdate = async (groupId, updates) => {
            console.log('âœ… Mock onUpdate called:', groupId, updates);
            document.getElementById('testOutput').innerHTML += `
                <p><strong>âœ… Grup GÃ¼ncellendi:</strong> ${groupId}</p>
                <p><strong>GÃ¼ncellemeler:</strong> ${JSON.stringify(updates)}</p>
            `;
            document.getElementById('testResults').style.display = 'block';
        };

        const mockOnDelete = async (groupId) => {
            console.log('âœ… Mock onDelete called:', groupId);
            document.getElementById('testOutput').innerHTML += `
                <p><strong>âœ… Grup Silindi:</strong> ${groupId}</p>
            `;
            document.getElementById('testResults').style.display = 'block';
        };

        // Kategori modal'Ä±nÄ± import et ve baÅŸlat
        try {
            const { initCategoryGroupsModal } = await import('./assets/js/ui/category-groups-modal.js');
            
            const categoryGroupsModal = initCategoryGroupsModal({
                onCreate: mockOnCreate,
                onUpdate: mockOnUpdate,
                onDelete: mockOnDelete
            });

            // Test butonlarÄ±
            document.getElementById('testCreateModal').addEventListener('click', () => {
                console.log('ğŸ”„ Test: Yeni grup modal aÃ§Ä±lÄ±yor...');
                categoryGroupsModal.showCreateModal();
            });

            document.getElementById('testEditModal').addEventListener('click', () => {
                console.log('ğŸ”„ Test: DÃ¼zenleme modal aÃ§Ä±lÄ±yor...');
                // Test iÃ§in mock grup verisi
                const mockGroup = {
                    id: 'test-group-123',
                    name: 'Test Grubu',
                    categories: ['Elektrik', 'Elektronik', 'Makine-Ä°malat']
                };
                categoryGroupsModal.showEditModal(mockGroup);
            });

            document.getElementById('testDirectCategories').addEventListener('click', async () => {
                console.log('ğŸ”„ Test: Kategorileri doÄŸrudan test ediliyor...');
                try {
                    // Categories.js'i doÄŸrudan import et
                    const { CATEGORIES } = await import('./categories.js');
                    console.log('âœ… Categories doÄŸrudan yÃ¼klendi:', CATEGORIES);
                    document.getElementById('testOutput').innerHTML += `
                        <p><strong>âœ… Kategoriler doÄŸrudan yÃ¼klendi:</strong></p>
                        <ul>
                            ${CATEGORIES.map(cat => `<li>${cat}</li>`).join('')}
                        </ul>
                    `;
                    document.getElementById('testResults').style.display = 'block';
                } catch (error) {
                    console.error('âŒ Categories doÄŸrudan yÃ¼klenirken hata:', error);
                    document.getElementById('testOutput').innerHTML += `
                        <p><strong>âŒ Categories doÄŸrudan yÃ¼kleme hatasÄ±:</strong> ${error.message}</p>
                    `;
                    document.getElementById('testResults').style.display = 'block';
                }
            });

            console.log('âœ… Kategori modal baÅŸarÄ±yla yÃ¼klendi!');
            document.getElementById('testOutput').innerHTML = '<p><strong>âœ… Modal baÅŸarÄ±yla yÃ¼klendi!</strong></p>';
            document.getElementById('testResults').style.display = 'block';

        } catch (error) {
            console.error('âŒ Modal yÃ¼klenirken hata:', error);
            document.getElementById('testOutput').innerHTML = `
                <p><strong>âŒ Hata:</strong> ${error.message}</p>
                <p><strong>Detay:</strong> ${error.stack}</p>
            `;
            document.getElementById('testResults').style.display = 'block';
        }
    </script>
</body>
</html>
